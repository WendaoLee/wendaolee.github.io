"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[47],{3047:function(e,t,n){n.r(t),n.d(t,{FontPreviewExample:function(){return l},default:function(){return r}});var a=n(2645),s=n(6612);let o=e=>{let{fontFaces:t=[],previewText:n="The quick brown fox jumps over the lazy dog. 0123456789 你好世界！",fontSize:o="24px",color:l="#333",backgroundColor:r="#fff",showLoadingState:i=!0,className:c=""}=e,[d,f]=(0,s.useState)(new Set),[m,x]=(0,s.useState)(!0),[p,y]=(0,s.useState)([]),h=(0,s.useRef)(null);if((0,s.useEffect)(()=>{let e=async()=>{x(!0),y([]);let e=new Set;if(void 0!==window.document)try{let n=t.map(async t=>{try{let n=new FontFace(t.fontFamily,t.src,{style:t.fontStyle||"normal"}),a=await n.load();return window.document.fonts.add(a),e.add(t.fontFamily),{success:!0,fontFamily:t.fontFamily}}catch(e){return console.error("字体加载失败: ".concat(t.fontFamily),e),y(e=>[...e,t.fontFamily]),{success:!1,fontFamily:t.fontFamily,error:e}}});await Promise.allSettled(n),f(e)}catch(e){console.error("字体加载过程中发生错误:",e)}finally{x(!1)}};t.length>0?e():x(!1)},[t]),void 0===window)return(0,a.jsx)("div",{});let u=e=>void 0!==window&&void 0!==window.document&&window.document.fonts.check('12px "'.concat(e,'"'));return(0,a.jsxs)("div",{ref:h,className:"font-preview-container ".concat(c),style:{backgroundColor:r,padding:"20px",borderRadius:"8px"},children:[(0,a.jsx)("style",{dangerouslySetInnerHTML:{__html:t.map(e=>"\n      @font-face {\n        font-family: '".concat(e.fontFamily,"';\n        src: ").concat(e.src,";\n        font-style: ").concat(e.fontStyle||"normal",";\n        font-weight: ").concat(e.fontWeight||"normal",";\n        font-display: ").concat(e.fontDisplay||"swap",";\n      }\n    ")).join("\n")}}),i&&m&&(0,a.jsxs)("div",{className:"loading-state",style:{marginBottom:"16px"},children:[(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"正在加载字体..."}),(0,a.jsx)("div",{className:"flex space-x-2 mt-2",children:t.map((e,t)=>(0,a.jsx)("div",{className:"text-xs text-gray-400",children:e.fontFamily},t))})]}),p.length>0&&(0,a.jsxs)("div",{className:"error-state",style:{marginBottom:"16px"},children:[(0,a.jsx)("div",{className:"text-sm text-red-500",children:"以下字体加载失败:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:p.map((e,t)=>(0,a.jsx)("span",{className:"text-xs bg-red-100 text-red-600 px-2 py-1 rounded",children:e},t))})]}),(0,a.jsx)("div",{className:"font-previews space-y-4",children:t.map((e,t)=>(0,a.jsxs)("div",{className:"font-preview-item",children:[(0,a.jsxs)("div",{className:"font-info mb-2",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:e.fontFamily}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["样式: ",e.fontStyle||"normal"," | 粗细: ",e.fontWeight||"normal"," | 状态: ",u(e.fontFamily)?"✅ 可用":"❌ 不可用"]})]}),(0,a.jsx)("div",{className:"preview-text",style:{fontFamily:'"'.concat(e.fontFamily,'"'),fontSize:o,color:l,lineHeight:"1.5",minHeight:"60px",border:"1px solid #e5e7eb",borderRadius:"4px",padding:"12px",backgroundColor:"#fafafa"},children:n})]},t))}),(0,a.jsx)("div",{className:"font-stats mt-4 pt-4 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["总计: ",t.length," 个字体 | 成功加载: ",d.size," 个 | 加载失败: ",p.length," 个"]})})]})},l=()=>(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"字体预览"}),(0,a.jsx)(o,{fontFaces:[{fontFamily:"Merriweather",src:'url("/fonts/Merriweather-Light.woff2") format("woff2")'},{fontFamily:"OPPO Sans3.0",src:'url("https://openfs.oppomobile.com/ssi/font/OPlusSans3-Regular.woff2") format("woff2")'},{fontFamily:"Optiker-K:OPTICIAN SANS",src:'url("/fonts/Optiker-K.woff2") format("truetype")'}],previewText:"The quick brown fox jumps over the lazy dog. 0123456789. Do you know 2992. 你好Helloworld233世界233！这是 one 一个字体预览测试。",fontSize:"20px",backgroundColor:"#f8f9fa",showLoadingState:!0})]});var r=l}}]);